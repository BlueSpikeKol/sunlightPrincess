using UnityEngine;
using System.Collections;

namespace PlatformerPro
{
    /// <summary>
    /// An item to quickly add health to the character.
    /// </summary>
    public class ItemInvulnerability: Item
    {
        public float invulnerabilityTime = 10f;

        /// <summary>
        /// Init this item.
        /// </summary>
        override public void Init()
        {
            base.Init();
            // Doesn't relaly matter but for consistency.
            if (itemClass != ItemClass.SINGLE)
            {
                itemClass = ItemClass.SINGLE;
            }
        }

        /// <summary>
        /// Do the collection.
        /// </summary>
        /// <param name="character">Character doing the collection.</param>
        override protected void DoCollect(Character character)
        {
            CharacterHealth health = character.GetComponentInChildren<CharacterHealth>();
            if (health == null)
            {
                Debug.LogWarning("Tried to make character invulnerable, but the character doesn't have health script");
            }
            else
            {
                health.SetInvulnerable(invulnerabilityTime);
            }

            DoEventForCollect(character);
        }
    }
}
